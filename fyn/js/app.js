"use strict";var _createClass=function(){function l(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var model={},octo={},view={},G_Model=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"AIzaSyAaYL795gcBKEjS2Ud2Rb12A7hebgrT-Fc",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.getElementById("map");_classCallCheck(this,r),this.API=e,this.testMarker={lat:22.2485,lng:114.1542},this.map={},this.mStyles=[[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels",stylers:[{weight:4}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels",stylers:[{weight:2}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],[{featureType:"all",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"},{saturation:"-100"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40},{visibility:"off"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"off"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#4d6059"}]},{featureType:"landscape",elementType:"geometry.stroke",stylers:[{color:"#4d6059"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#4d6059"}]},{featureType:"poi",elementType:"geometry",stylers:[{lightness:21}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#4d6059"}]},{featureType:"poi",elementType:"geometry.stroke",stylers:[{color:"#4d6059"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"on"},{color:"#7f8d89"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#7f8d89"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#7f8d89"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#7f8d89"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#7f8d89"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#7f8d89"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#7f8d89"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#7f8d89"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"all",stylers:[{color:"#2b3638"},{visibility:"on"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#2b3638"},{lightness:17}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#24282b"}]},{featureType:"water",elementType:"geometry.stroke",stylers:[{color:"#24282b"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.icon",stylers:[{visibility:"off"}]}]],this.mapEl=t,this.libraries=["places","geometry"],this.home={searchMarker:null,markers:[]},this.places={searchMarker:null,markers:[]}}return _createClass(r,[{key:"loadMap",value:function(l){var a=["places","geometry"];return new Promise(function(e,t){var r=document.createElement("script");r.src="https://maps.googleapis.com/maps/api/js?libraries="+a.join()+"&key="+l,r.onload=function(){return e()},r.onerror=function(){return t(r.src)},document.head.appendChild(r)})}},{key:"createMarker",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{position:{},title:"",icon:""},t={map:this.map};return e.position?t.position=e.position:e.position,e.title?t.title=e.title:e.position,e.icon?t.icon=e.icon:e.icon,t.animation=google.maps.Animation.DROP,new google.maps.Marker(t)}},{key:"findPlace",value:function(e,t){new google.maps.places.PlacesService(this.map).findPlaceFromQuery(e,t)}}]),r}();function FynViewModel(){var s=this;s.Gmap=new G_Model,s.title=ko.observable("FYN - Find your Neighborhood"),s.activeInterface=ko.observable(),s.error=ko.observable(!1),s.MenuVM=function(e,t){this.name=e,this.icon=t,this.alt=e+" icon",this.active=ko.observable(!1)},s.activeMenu=ko.observable("start"),s.menuRemoveActive=function(e){if(e.active())e.active(!1),s.activeMenu("start"),s.intViewClass(!1);else{var t=!0,r=!1,l=void 0;try{for(var a,o=s.menuItems[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.active(!1)}}catch(e){r=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw l}}e.active(!0),s.intViewClass(!0),s.activeMenu(e.name)}},s.menuItems=[new s.MenuVM("Homes","images/home.svg"),new s.MenuVM("Places","images/map.svg"),new s.MenuVM("Filters","images/shuffle.svg"),new s.MenuVM("Settings","images/cog.svg")],s.intViewClass=ko.observable(!1),s.hSearch={name:ko.observable(""),search:ko.observable(""),hArray:new Array,savedArray:[],searchMark:function(){s.Gmap.findPlace({query:""+s.hSearch.search(),fields:["formatted_address","name","geometry"]},s.hSearch.addMark)},addMark:function(e,t){t==google.maps.places.PlacesServiceStatus.OK?s.Gmap.createMarker({position:e[0].geometry.location,title:s.hSearch.name()}):s.error(t)}},s.lasthSearch=null,s.searchMarker=function(){s.Gmap.findPlace({query:""+s.hSearch.search(),fields:["formatted_address","name","geometry"]},s.addMarker)},s.addMarker=function(e,t){t==google.maps.places.PlacesServiceStatus.OK?s.Gmap.createMarker({position:e[0].geometry.location,title:s.hSearch.name()}):s.error(t)},s.initApp=function(){var e=s.Gmap;e.map=new google.maps.Map(e.mapEl,{center:e.testMarker,zoom:11,styles:e.mStyles[0],disableDefaultUI:!0})},s.Gmap.loadMap(s.Gmap.API).then(s.initApp).catch(function(e){alert("Looks like the first URL failed. Time to slowly walk away.\n"+e)})}ko.applyBindings(new FynViewModel);